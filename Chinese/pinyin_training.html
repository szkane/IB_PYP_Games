<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Hilsonçš„æ‹¼éŸ³æ ‡è°ƒå°åŠ©æ‰‹</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Zcool+KuaiLe&display=swap"
    rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans SC', sans-serif;
      background-color: #f0f9ff;
      overscroll-behavior: none;
      touch-action: manipulation;
    }

    .pinyin-font {
      font-family: Arial, sans-serif;
    }

    .fun-font {
      font-family: 'Zcool KuaiLe', cursive;
    }

    .card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .card:active {
      transform: scale(0.96);
    }

    .btn-active {
      background-color: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }

    .btn-inactive {
      background-color: white;
      color: #4b5563;
      border-color: #e5e7eb;
    }

    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .hide-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .correct-anim {
      animation: bounce 0.5s;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.2);
      }
    }

    .shake {
      animation: shake 0.5s;
    }

    @keyframes shake {
      0% {
        transform: translate(1px, 1px) rotate(0deg);
      }

      10% {
        transform: translate(-1px, -2px) rotate(-1deg);
      }

      20% {
        transform: translate(-3px, 0px) rotate(1deg);
      }

      30% {
        transform: translate(3px, 2px) rotate(0deg);
      }

      40% {
        transform: translate(1px, -1px) rotate(1deg);
      }

      50% {
        transform: translate(-1px, 2px) rotate(-1deg);
      }

      60% {
        transform: translate(-3px, 1px) rotate(0deg);
      }

      70% {
        transform: translate(3px, 1px) rotate(-1deg);
      }

      80% {
        transform: translate(-1px, -1px) rotate(1deg);
      }

      90% {
        transform: translate(1px, 2px) rotate(0deg);
      }

      100% {
        transform: translate(1px, -2px) rotate(-1deg);
      }
    }

  </style>
</head>

<body class="bg-blue-50 h-screen w-screen flex flex-col overflow-hidden">

  <!-- é¡¶éƒ¨ï¼šæ ‡è°ƒæ­Œ -->
  <header class="bg-blue-500 text-white p-3 md:p-4 shadow-md z-20 flex-shrink-0">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <h1 class="text-xl md:text-2xl font-bold fun-font flex items-center gap-2">
        <span>ğŸ“</span> Hilsonçš„æ‹¼éŸ³åŠ©æ‰‹
      </h1>
      <button onclick="playSong()"
        class="bg-yellow-400 text-blue-900 px-4 py-2 rounded-full text-sm md:text-base font-bold shadow hover:bg-yellow-300 transition transform active:scale-95 flex items-center gap-2">
        <span>ğŸ”Š</span> å¬æ ‡è°ƒæ­Œ
      </button>
    </div>
    <!-- æ ‡è°ƒæ­Œæç¤º -->
    <div class="max-w-7xl mx-auto mt-2 text-center bg-blue-600/80 rounded-lg p-2 text-sm md:text-base backdrop-blur-sm">
      <span class="inline-block mx-2">æœ‰ <span class="text-yellow-300 font-bold text-lg">a</span> å…ˆæ‰¾ a</span>
      <span class="inline-block mx-2">æ²¡ a æ‰¾ <span class="text-yellow-300 font-bold text-lg">o e</span></span>
      <span class="hidden md:inline-block text-blue-300">|</span>
      <span class="inline-block mx-2"><span class="text-yellow-300 font-bold text-lg">i u</span> å¹¶åˆ—æ ‡åœ¨å</span>
      <span class="inline-block mx-2"><span class="text-yellow-300 font-bold text-lg">i</span> ä¸Šæ ‡è°ƒç‚¹å»æ‰ï¼</span>
    </div>
  </header>

  <!-- å¯¼èˆªæ  -->
  <nav class="w-full bg-white/80 backdrop-blur-md border-b border-blue-100 z-10 flex-shrink-0">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex space-x-4 overflow-x-auto hide-scrollbar py-3 justify-start md:justify-center">
        <button onclick="switchTab('two')" id="tab-two"
          class="btn-active flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 shadow-sm transition text-lg">ä¸¤æ‹¼éŸ³èŠ‚</button>
        <button onclick="switchTab('three')" id="tab-three"
          class="btn-inactive flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 shadow-sm transition text-lg">ä¸‰æ‹¼éŸ³èŠ‚</button>
        <button onclick="switchTab('whole')" id="tab-whole"
          class="btn-inactive flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 shadow-sm transition text-lg">æ•´ä½“è®¤è¯»</button>
        <button onclick="switchTab('quiz')" id="tab-quiz"
          class="btn-inactive flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 bg-purple-100 text-purple-700 border-purple-200 shadow-sm transition text-lg flex items-center gap-1"><span>ğŸ®</span>
          æŒ‘æˆ˜ç»ƒä¹ </button>
      </div>
    </div>
  </nav>

  <!-- å†…å®¹åŒºåŸŸ -->
  <main class="flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-6 bg-blue-50 relative scroll-smooth">

    <div class="max-w-7xl mx-auto h-full">
      <!-- å­¦ä¹ è§†å›¾ -->
      <div id="learning-view"
        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 pb-20">
        <!-- å¡ç‰‡å°†é€šè¿‡ JS åŠ¨æ€æ’å…¥è¿™é‡Œ -->
      </div>

      <!-- æµ‹è¯•è§†å›¾ -->
      <div id="quiz-view" class="hidden h-full flex flex-col justify-center items-center pb-20">
        <div
          class="bg-white rounded-3xl shadow-2xl p-8 md:p-12 text-center w-full max-w-2xl border-b-8 border-purple-200">
          <div class="flex justify-between items-center mb-6">
            <span class="bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-base font-bold">ç¬¬ <span
                id="quiz-count">1</span> é¢˜</span>
            <div class="text-gray-400 text-sm">ç‚¹å‡»å­—æ¯æ ‡å£°è°ƒ</div>
          </div>

          <h2 class="text-3xl md:text-4xl text-gray-700 mb-8 font-bold" id="quiz-char-display">æ±‰å­—</h2>

          <!-- é¢˜ç›®åŒºåŸŸ -->
          <div class="my-8 flex justify-center items-center gap-2 md:gap-4 flex-wrap" id="quiz-letters">
            <!-- å­—æ¯æŒ‰é’®å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
          </div>

          <div id="quiz-feedback" class="h-20 flex items-center justify-center bg-gray-50 rounded-xl p-4">
            <p class="text-gray-400 text-base">ğŸ‘† è¯·ç‚¹å‡»ä¸Šæ–¹çš„å­—æ¯å®Œæˆæ ‡è°ƒ</p>
          </div>

          <div class="mt-8 flex justify-center h-16">
            <button onclick="nextQuestion()"
              class="bg-green-500 hover:bg-green-600 text-white text-xl font-bold py-3 px-10 rounded-full shadow-lg transform transition active:scale-95 hidden w-full md:w-auto"
              id="next-btn">
              ä¸‹ä¸€é¢˜ â”
            </button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <script>
    // --- æ ¸å¿ƒæ•°æ®é‡æ„ï¼šè¦†ç›–å…¨éŸµæ¯ & å…¨æ±‰å­—æ‹ŸéŸ³ ---
    // ç›®æ ‡ï¼š
    // 1. å»é‡ï¼šé¿å…é‡å¤çš„éŸµæ¯ç»“æ„ã€‚
    // 2. å¤šæ ·æ€§ï¼šæ¶µç›– a, o, e, i, u, Ã¼, ai, ei, ui, ao, ou, iu, ie, Ã¼e, er, an, en, in, un, Ã¼n, ang, eng, ing, ong
    // 3. TTSï¼šå£°æ¯ã€éŸµæ¯å…¨éƒ¨ä½¿ç”¨ã€çº¯æ±‰å­—ã€‘æ˜ å°„ï¼Œç¡®ä¿è¯»éŸ³å‡†ç¡®ã€‚

    // æ±‰å­—æ‹ŸéŸ³å¯¹ç…§è¡¨ (ä»…ä¾›å‚è€ƒé€»è¾‘)ï¼š
    // a=é˜¿, o=å–”, e=é¹…, i=è¡£, u=ä¹Œ, Ã¼=è¿‚
    // ai=çˆ±, ei=è¯¶, ui=å¨, ao=è¢„, ou=æ¬§, iu=ä¼˜
    // an=å®‰, en=æ©, in=å› , ang=æ˜‚, eng=äº¨(å–éŸµ), ing=è‹±, ong=è½°(å–éŸµ)

    const data = {
      two: [
        // å•éŸµæ¯
        { py: "mÄ", char: "å¦ˆ", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a", tts: "æ‘¸, é˜¿, å¦ˆ" },
        { py: "bÅ", char: "æ³¢", rule: "æ²¡ a æ‰¾ o e (æœ‰o)", type: "o", tts: "ç», å–”, æ³¢" },
        { py: "lÃ¨", char: "ä¹", rule: "æ²¡ a æ‰¾ o e (æœ‰e)", type: "e", tts: "å‹’, é¥¿, ä¹" },
        { py: "bÇ", char: "ç¬”", rule: "i ä¸Šæ ‡è°ƒç‚¹å»æ‰", type: "i", tts: "ç», ä»¥, ç¬”" },
        { py: "bÃ¹", char: "ä¸", rule: "æ ‡åœ¨ u ä¸Š", type: "u", tts: "ç», æ‚Ÿ, ä¸" },
        { py: "nÇš", char: "å¥³", rule: "Ã¼ ä¸Šæ ‡è°ƒä¿ç•™ç‚¹", type: "u_dot", tts: "å‘¢, è¿‚, å¥³" },

        // å¤éŸµæ¯ (ai, ei, ui, ao, ou, iu)
        { py: "cÃ i", char: "èœ", rule: "æœ‰ a å…ˆæ‰¾ a (ai)", type: "a", tts: "é›Œ, çˆ±, èœ" },
        { py: "fÄ“i", char: "é£", rule: "æ²¡ a æ‰¾ o e (ei)", type: "e", tts: "ä½›, è¯¶, é£" },
        { py: "guÄ«", char: "å½’", rule: "i u å¹¶åˆ—æ ‡åœ¨å (uiæ ‡i)", type: "iu", tts: "å“¥, å¨, å½’" },
        { py: "pÇo", char: "è·‘", rule: "æœ‰ a å…ˆæ‰¾ a (ao)", type: "a", tts: "å¡, è¢„, è·‘" },
        { py: "tÃ³u", char: "å¤´", rule: "æ²¡ a æ‰¾ o e (ouæ ‡o)", type: "o", tts: "ç‰¹, æ¬§, å¤´" },
        { py: "liÃº", char: "æµ", rule: "i u å¹¶åˆ—æ ‡åœ¨å (iuæ ‡u)", type: "iu", tts: "å‹’, ä¼˜, æµ" },

        // é¼»éŸµæ¯ (an, en, in, ang, eng, ing, ong)
        { py: "shÄn", char: "å±±", rule: "æœ‰ a å…ˆæ‰¾ a (an)", type: "a", tts: "è¯—, å®‰, å±±" },
        { py: "mÃ©n", char: "é—¨", rule: "æ²¡ a æ‰¾ o e (en)", type: "e", tts: "æ‘¸, å—¯, é—¨" },
        { py: "lÃ­n", char: "æ—", rule: "i ä¸Šæ ‡è°ƒç‚¹å»æ‰ (in)", type: "i", tts: "å‹’, é“¶, æ—" },
        { py: "bÄng", char: "å¸®", rule: "æœ‰ a å…ˆæ‰¾ a (ang)", type: "a", tts: "ç», æ˜‚, å¸®" },
        { py: "dÄ“ng", char: "ç¯", rule: "æ²¡ a æ‰¾ o e (eng)", type: "e", tts: "å¾—, æ©, ç¯" },
        { py: "xÄ«ng", char: "æ˜Ÿ", rule: "i ä¸Šæ ‡è°ƒç‚¹å»æ‰ (ing)", type: "i", tts: "è¥¿, è‹±, æ˜Ÿ" },
        { py: "hÃ³ng", char: "çº¢", rule: "æ²¡ a æ‰¾ o e (ongæ ‡o)", type: "o", tts: "å–, çº¢, çº¢" }
      ],
      three: [
        // ç®€å•çš„ä»‹æ¯ç»„åˆ (u-a, u-o, i-a)
        { py: "guÄ", char: "ç“œ", rule: "æœ‰ a å…ˆæ‰¾ a (g-u-a)", type: "a", tts: "å“¥, ä¹Œ, é˜¿, ç“œ" },
        { py: "huÄ", char: "èŠ±", rule: "æœ‰ a å…ˆæ‰¾ a (h-u-a)", type: "a", tts: "å–, ä¹Œ, é˜¿, èŠ±" },
        { py: "duÇ’", char: "æœµ", rule: "æ²¡ a æ‰¾ o e (d-u-o)", type: "o", tts: "å¾—, ä¹Œ, å™¢, æœµ" },
        { py: "jiÄ", char: "å®¶", rule: "æœ‰ a å…ˆæ‰¾ a (j-i-a)", type: "a", tts: "é¸¡, è¡£, é˜¿, å®¶" },
        { py: "qiÄ", char: "æ", rule: "æœ‰ a å…ˆæ‰¾ a (q-i-a)", type: "a", tts: "ä¸ƒ, è¡£, é˜¿, æ" },
        { py: "xiÄ", char: "è™¾", rule: "æœ‰ a å…ˆæ‰¾ a (x-i-a)", type: "a", tts: "è¥¿, è¡£, é˜¿, è™¾" },

        // å¤æ‚çš„ä¸‰æ‹¼ (åŒ…å« ai, ao, an, ang, ong ç­‰)
        { py: "shuÃ i", char: "å¸…", rule: "æœ‰ a å…ˆæ‰¾ a (u-ai)", type: "a", tts: "è¯—, ä¹Œ, çˆ±, å¸…" },
        { py: "kuÃ i", char: "å¿«", rule: "æœ‰ a å…ˆæ‰¾ a (u-ai)", type: "a", tts: "ç§‘, ä¹Œ, çˆ±, å¿«" },
        { py: "qiÃ¡o", char: "æ¡¥", rule: "æœ‰ a å…ˆæ‰¾ a (i-ao)", type: "a", tts: "ä¸ƒ, è¡£, ç†¬, æ¡¥" },
        { py: "xiÇo", char: "å°", rule: "æœ‰ a å…ˆæ‰¾ a (i-ao)", type: "a", tts: "è¥¿, è¡£, è¢„, å°" },
        { py: "luÃ n", char: "ä¹±", rule: "æœ‰ a å…ˆæ‰¾ a (u-an)", type: "a", tts: "å‹’, ä¹Œ, å²¸, ä¹±" },
        { py: "juÇn", char: "å·", rule: "æœ‰ a å…ˆæ‰¾ a (Ã¼-an)", type: "a", tts: "é¸¡, è¿‚, ä¿º, å·" },
        { py: "quÃ¡n", char: "æ³‰", rule: "æœ‰ a å…ˆæ‰¾ a (Ã¼-an)", type: "a", tts: "ä¸ƒ, è¿‚, å®‰, æ³‰" },
        { py: "xiÃ³ng", char: "ç†Š", rule: "æ²¡ a æ‰¾ o e (i-ong)", type: "o", tts: "è¥¿, è¡£, è½°, ç†Š" },
        { py: "guÄng", char: "å…‰", rule: "æœ‰ a å…ˆæ‰¾ a (u-ang)", type: "a", tts: "å“¥, ä¹Œ, æ˜‚, å…‰" }
      ],
      whole: [
        // æ•´ä½“è®¤è¯»éŸ³èŠ‚ä¸éœ€è¦æ‹¼è¯»ï¼Œç›´æ¥è¯»éŸ³
        { py: "yuÄn", char: "å†¤", rule: "æœ‰ a å…ˆæ‰¾ a (y-Ã¼-an)", type: "a", tts: "å†¤" },
        { py: "yÄ“", char: "è€¶", rule: "æ²¡ a æ‰¾ o e (i-e)", type: "e", tts: "è€¶" },
        { py: "yÃ©", char: "çˆ·", rule: "æ²¡ a æ‰¾ o e", type: "e", tts: "çˆ·" },
        { py: "yuÄ“", char: "çº¦", rule: "æ²¡ a æ‰¾ o e (Ã¼-e)", type: "e", tts: "çº¦" },
        { py: "yÄ«", char: "è¡£", rule: "i ä¸Šæ ‡è°ƒç‚¹å»æ‰", type: "i", tts: "è¡£" },
        { py: "wÅ«", char: "ä¹Œ", rule: "æ ‡åœ¨ u ä¸Š", type: "u", tts: "ä¹Œ" },
        { py: "yÅ«", char: "è¿‚", rule: "j q x y è§ Ã¼ å»ä¸¤ç‚¹ (æ ‡u)", type: "u", tts: "è¿‚" },
        { py: "yÇ”", char: "é›¨", rule: "j q x y è§ Ã¼ å»ä¸¤ç‚¹ (æ ‡u)", type: "u", tts: "é›¨" },
        { py: "yÅ«n", char: "æ™•", rule: "j q x y è§ Ã¼ å»ä¸¤ç‚¹ (æ ‡u)", type: "u", tts: "æ™•" }
      ]
    };

    function generateQuizData() {
      const all = [...data.two, ...data.three, ...data.whole];
      return all.map(item => {
        let cleanPy = item.py
          .replace(/[ÄÃ¡ÇÃ ]/g, 'a')
          .replace(/[ÅÃ³Ç’Ã²]/g, 'o')
          .replace(/[Ä“Ã©Ä›Ã¨]/g, 'e')
          .replace(/[Ä«Ã­ÇÃ¬]/g, 'i')
          .replace(/[Å«ÃºÇ”Ã¹]/g, 'u')
          .replace(/[Ç–Ç˜ÇšÇœ]/g, 'Ã¼');

        let targetChar = '';
        if (item.py.match(/[ÄÃ¡ÇÃ ]/)) targetChar = 'a';
        else if (item.py.match(/[ÅÃ³Ç’Ã²]/)) targetChar = 'o';
        else if (item.py.match(/[Ä“Ã©Ä›Ã¨]/)) targetChar = 'e';
        else if (item.py.match(/[Ä«Ã­ÇÃ¬]/)) targetChar = 'i';
        else if (item.py.match(/[Å«ÃºÇ”Ã¹]/)) targetChar = 'u';
        else if (item.py.match(/[Ç–Ç˜ÇšÇœ]/)) targetChar = 'Ã¼';

        if (cleanPy.includes('iu')) targetChar = 'u';
        if (cleanPy.includes('ui')) targetChar = 'i';

        return {
          original: item.py,
          char: item.char,
          clean: cleanPy,
          targetChar: targetChar,
          hint: item.rule,
          tts: item.tts
        };
      }).sort(() => 0.5 - Math.random());
    }

    let quizQuestions = [];
    let currentQuestionIndex = 0;

    let availableVoices = [];

    function loadVoices() {
      availableVoices = window.speechSynthesis.getVoices();
    }

    if ('speechSynthesis' in window) {
      loadVoices();
      window.speechSynthesis.onvoiceschanged = loadVoices;
    }

    // å‘éŸ³å‡½æ•°
    function speak(text) {
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();

        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'zh-CN';
        utterance.rate = 0.8;

        if (availableVoices.length > 0) {
          const zhVoices = availableVoices.filter(v => v.lang.includes('zh'));
          let targetVoice = null;
          if (zhVoices.length > 0) {
            targetVoice = zhVoices.find(v => v.name.includes('Google') || v.name.includes('Microsoft'));
            if (!targetVoice) targetVoice = zhVoices[0];
          }
          if (targetVoice) {
            utterance.voice = targetVoice;
          }
        }

        window.speechSynthesis.speak(utterance);
      }
    }

    function playSong() {
      const songForTTS = "æœ‰ å•Š å…ˆæ‰¾ å•Šï¼Œæ²¡ å•Š æ‰¾ å–” é¹…ï¼Œè¡£ ä¹Œ å¹¶åˆ—æ ‡åœ¨åï¼Œè¡£ ä¸Šæ ‡è°ƒç‚¹å»æ‰";
      speak(songForTTS);
    }

    const colors = {
      'a': 'bg-red-100 text-red-600 border-red-200',
      'o': 'bg-yellow-100 text-yellow-600 border-yellow-200',
      'e': 'bg-green-100 text-green-600 border-green-200',
      'iu': 'bg-purple-100 text-purple-600 border-purple-200',
      'i': 'bg-indigo-100 text-indigo-600 border-indigo-200',
      'u': 'bg-blue-100 text-blue-600 border-blue-200',
      'u_dot': 'bg-pink-100 text-pink-600 border-pink-200'
    };

    function renderCards(category) {
      const container = document.getElementById('learning-view');
      container.innerHTML = '';

      data[category].forEach(item => {
        const style = colors[item.type] || 'bg-gray-100 text-gray-800';

        const card = document.createElement('div');
        card.className = `card bg-white rounded-2xl shadow-sm border-b-4 p-6 flex flex-col items-center justify-center relative overflow-hidden ${style.replace('bg-', 'border-')}`;

        card.onclick = () => speak(item.tts);

        card.innerHTML = `
                    <div class="absolute top-3 right-3 text-2xl opacity-20">ğŸ”Š</div>
                    <div class="text-6xl font-bold pinyin-font mb-3 ${style.split(' ')[1]}">${item.py}</div>
                    <div class="text-4xl text-gray-700 font-serif mb-4">${item.char}</div>
                    <div class="w-full bg-gray-50 rounded-xl p-3 text-center">
                        <span class="text-xs text-gray-400 uppercase tracking-wider">è§„åˆ™</span>
                        <p class="text-base font-bold text-gray-600 leading-tight mt-1">${item.rule}</p>
                    </div>
                `;
        container.appendChild(card);
      });
    }

    function switchTab(tab) {
      ['two', 'three', 'whole', 'quiz'].forEach(t => {
        const btn = document.getElementById(`tab-${t}`);
        if (t === tab) {
          btn.classList.remove('btn-inactive');
          btn.classList.add('btn-active');
          if (t === 'quiz') {
            btn.classList.remove('bg-purple-100', 'text-purple-700', 'border-purple-200');
            btn.classList.add('bg-purple-600', 'text-white', 'border-purple-600');
          }
        } else {
          btn.classList.remove('btn-active');
          btn.classList.add('btn-inactive');
          if (t === 'quiz') {
            btn.classList.add('bg-purple-100', 'text-purple-700', 'border-purple-200');
            btn.classList.remove('bg-purple-600', 'text-white', 'border-purple-600');
          }
        }
      });

      const learningView = document.getElementById('learning-view');
      const quizView = document.getElementById('quiz-view');

      if (tab === 'quiz') {
        learningView.classList.add('hidden');
        quizView.classList.remove('hidden');
        initQuiz();
      } else {
        learningView.classList.remove('hidden');
        quizView.classList.add('hidden');
        renderCards(tab);
      }
    }

    function initQuiz() {
      quizQuestions = generateQuizData();
      currentQuestionIndex = 0;
      renderQuestion();
    }

    function renderQuestion() {
      const q = quizQuestions[currentQuestionIndex];
      const container = document.getElementById('quiz-letters');
      const feedback = document.getElementById('quiz-feedback');
      const nextBtn = document.getElementById('next-btn');

      document.getElementById('quiz-count').innerText = currentQuestionIndex + 1;
      document.getElementById('quiz-char-display').innerText = `â€œ${q.char}â€`;

      container.innerHTML = '';
      feedback.innerHTML = `<p class="text-gray-400 text-base">ğŸ‘† è¯·ç‚¹å‡»ä¸Šæ–¹çš„å­—æ¯å®Œæˆæ ‡è°ƒ</p>`;
      nextBtn.classList.add('hidden');

      let displayChars = q.clean.split('');

      displayChars.forEach((char, index) => {
        const btn = document.createElement('button');
        btn.className = "w-16 h-20 md:w-24 md:h-32 text-4xl md:text-6xl font-bold rounded-2xl border-4 border-gray-100 bg-white text-gray-700 hover:bg-blue-50 hover:border-blue-200 focus:outline-none transition transform shadow-sm relative overflow-hidden";
        btn.innerText = char;

        btn.onclick = () => {
          const isCorrect = (char === q.targetChar) ||
            (q.targetChar === 'Ã¼' && char === 'u' && q.clean.includes('u') && !q.clean.includes('a') && !q.clean.includes('e'));

          let actuallyCorrect = false;

          if (char === q.targetChar) actuallyCorrect = true;
          if (q.targetChar === 'Ã¼' && char === 'u') actuallyCorrect = true;
          if (q.original.includes('ui') && char === 'i') actuallyCorrect = true;
          if (q.original.includes('iu') && char === 'u') actuallyCorrect = true;

          if (actuallyCorrect) {
            btn.classList.remove('bg-white', 'border-gray-100');
            btn.classList.add('bg-green-500', 'text-white', 'border-green-600', 'correct-anim');
            feedback.innerHTML = `
                            <div class="text-center">
                                <p class="text-green-600 font-bold text-2xl mb-1">ğŸ‰ ç­”å¯¹å•¦ï¼</p>
                                <p class="text-gray-500 text-lg">è¯»ä½œï¼š<span class="font-bold text-black">${q.original}</span> (${q.hint})</p>
                            </div>
                        `;
            speak("ç­”å¯¹äº†ï¼" + q.tts);

            Array.from(container.children).forEach(b => b.disabled = true);
            nextBtn.classList.remove('hidden');
          } else {
            btn.classList.add('bg-red-100', 'border-red-300', 'text-red-500', 'shake');
            setTimeout(() => btn.classList.remove('shake'), 500);
            speak("ä¸å¯¹å“¦");

            if ('aeiouÃ¼'.includes(char)) {
              feedback.innerHTML = `<p class="text-red-500 font-bold text-lg">ä¸æ˜¯æ ‡åœ¨ ${char} ä¸Šå“¦ï¼Œå†æƒ³æƒ³å£è¯€ï¼</p>`;
            } else {
              feedback.innerHTML = `<p class="text-red-500 font-bold text-lg">å£°è°ƒä»æ¥ä¸æ ‡åœ¨å£°æ¯ ${char} ä¸Šå“¦ï¼</p>`;
            }
          }
        };
        container.appendChild(btn);
      });
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex >= quizQuestions.length) {
        document.getElementById('quiz-letters').innerHTML = `<div class="text-8xl animate-bounce mt-4">ğŸ†</div>`;
        document.getElementById('quiz-feedback').innerHTML = `
                    <div class="text-center mt-4">
                        <p class="text-3xl font-bold text-purple-600 mb-2">æŒ‘æˆ˜å®Œæˆï¼</p>
                        <p class="text-gray-500">Hilsonå¤ªæ£’äº†ï¼</p>
                    </div>
                `;
        document.getElementById('next-btn').innerHTML = "å†ç©ä¸€æ¬¡";
        document.getElementById('next-btn').onclick = initQuiz;
        document.getElementById('quiz-char-display').innerText = "";
      } else {
        renderQuestion();
      }
    }

    switchTab('two');

  </script>
</body>

</html>
