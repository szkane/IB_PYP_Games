<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¡çš®çš„æ‹¼éŸ³æ ‡è°ƒå°åŠ©æ‰‹</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Zcool+KuaiLe&display=swap"
    rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans SC', sans-serif;
      background-color: #f0f9ff;
      touch-action: manipulation;
      /* ä¼˜åŒ–è§¦å±ä½“éªŒ */
    }

    .pinyin-font {
      font-family: Arial, sans-serif;
      /* Arial å¯¹æ‹¼éŸ³æ˜¾ç¤ºæ”¯æŒè¾ƒå¥½ */
    }

    .fun-font {
      font-family: 'Zcool KuaiLe', cursive;
    }

    .card {
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    .btn-active {
      background-color: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }

    .btn-inactive {
      background-color: white;
      color: #4b5563;
      border-color: #e5e7eb;
    }

    /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .hide-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .correct-anim {
      animation: bounce 0.5s;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.2);
      }
    }

  </style>
</head>

<body class="bg-blue-50 min-h-screen pb-20">

  <!-- é¡¶éƒ¨ï¼šæ ‡è°ƒæ­Œ -->
  <header class="bg-blue-500 text-white p-4 shadow-lg sticky top-0 z-50">
    <div class="max-w-4xl mx-auto flex justify-between items-center">
      <h1 class="text-xl md:text-2xl font-bold fun-font">å¡çš®çš„æ‹¼éŸ³åŠ©æ‰‹ ğŸ“</h1>
      <button onclick="playSong()"
        class="bg-yellow-400 text-blue-900 px-3 py-1 rounded-full text-sm font-bold shadow hover:bg-yellow-300">
        ğŸ”Š å¬æ ‡è°ƒæ­Œ
      </button>
    </div>
    <div class="max-w-4xl mx-auto mt-2 text-center bg-blue-600 rounded-lg p-2 text-sm md:text-base opacity-90">
      æœ‰ <span class="text-yellow-300 font-bold text-lg">a</span> å…ˆæ‰¾ aï¼Œæ²¡ a æ‰¾ <span
        class="text-yellow-300 font-bold text-lg">o e</span>ï¼Œ<br>
      <span class="text-yellow-300 font-bold text-lg">i u</span> å¹¶åˆ—æ ‡åœ¨åï¼Œ<span
        class="text-yellow-300 font-bold text-lg">i</span> ä¸Šæ ‡è°ƒç‚¹å»æ‰ï¼
    </div>
  </header>

  <!-- å¯¼èˆªæ  -->
  <nav class="max-w-4xl mx-auto mt-6 px-4">
    <div class="flex space-x-2 overflow-x-auto hide-scrollbar py-2">
      <button onclick="switchTab('two')" id="tab-two"
        class="btn-active flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 shadow-sm transition">ä¸¤æ‹¼éŸ³èŠ‚</button>
      <button onclick="switchTab('three')" id="tab-three"
        class="btn-inactive flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 shadow-sm transition">ä¸‰æ‹¼éŸ³èŠ‚</button>
      <button onclick="switchTab('whole')" id="tab-whole"
        class="btn-inactive flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 shadow-sm transition">æ•´ä½“è®¤è¯»</button>
      <button onclick="switchTab('quiz')" id="tab-quiz"
        class="btn-inactive flex-shrink-0 px-6 py-2 rounded-full font-bold border-2 bg-purple-100 text-purple-700 border-purple-200 shadow-sm transition">ğŸ®
        æŒ‘æˆ˜ç»ƒä¹ </button>
    </div>
  </nav>

  <!-- å†…å®¹åŒºåŸŸ -->
  <main class="max-w-4xl mx-auto mt-4 px-4">

    <!-- å­¦ä¹ è§†å›¾ -->
    <div id="learning-view" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- å¡ç‰‡å°†é€šè¿‡ JS åŠ¨æ€æ’å…¥è¿™é‡Œ -->
    </div>

    <!-- æµ‹è¯•è§†å›¾ (é»˜è®¤éšè—) -->
    <div id="quiz-view" class="hidden">
      <div
        class="bg-white rounded-2xl shadow-xl p-6 md:p-10 text-center max-w-lg mx-auto mt-4 border-b-8 border-purple-200">
        <div class="mb-4">
          <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-bold">ç¬¬ <span
              id="quiz-count">1</span> é¢˜</span>
        </div>

        <h2 class="text-2xl text-gray-600 mb-2">è¯·ç‚¹å‡»æ­£ç¡®çš„ä½ç½®æ ‡è°ƒï¼š</h2>

        <!-- é¢˜ç›®åŒºåŸŸ -->
        <div class="my-8 flex justify-center items-center space-x-1" id="quiz-letters">
          <!-- å­—æ¯æŒ‰é’®å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
        </div>

        <div id="quiz-feedback" class="h-16 flex items-center justify-center">
          <p class="text-gray-400 text-sm">ç‚¹å‡»ä¸Šæ–¹çš„å­—æ¯è¯•è¯•çœ‹ï¼</p>
        </div>

        <div class="mt-4 flex justify-center">
          <button onclick="nextQuestion()"
            class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition active:scale-95 hidden"
            id="next-btn">
            ä¸‹ä¸€é¢˜ â”
          </button>
        </div>
      </div>

      <div class="mt-8 text-center text-gray-500 text-sm">
        ğŸ’¡ æç¤ºï¼šå¦‚æœä¸ç¡®å®šï¼Œå¯ä»¥å»å‰é¢çš„åˆ—è¡¨é‡Œå¤ä¹ å“¦ï¼
      </div>
    </div>

  </main>

  <!-- åº•éƒ¨æç¤º -->
  <footer class="mt-12 text-center text-gray-400 text-xs pb-6">
    <p>Â© 2025 Hilsonçš„ä¸“å±å­¦ä¹ åº”ç”¨ | æ ¸å¿ƒè§„åˆ™ï¼šéƒ¨ç¼–ç‰ˆä¸€å¹´çº§è¯­æ–‡ä¸Šå†Œ</p>
  </footer>

  <script>
    // --- æ•°æ®æº (ä¸¥æ ¼æŒ‰ç…§ç”¨æˆ·æä¾›çš„è¡¨æ ¼) ---
    const data = {
      two: [
        { py: "mÄ", char: "å¦ˆ", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "bÃ¡", char: "æ‹”", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "huÄ", char: "èŠ±", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "pÃ¡", char: "çˆ¬", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "mÃ ", char: "éª‚", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "guÇ", char: "ç“œ", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "lÃ³u", char: "æ¥¼", rule: "æ²¡ a æ‰¾ o e (æœ‰o)", type: "o" },
        { py: "duÇ’", char: "æœµ", rule: "æ²¡ a æ‰¾ o e (æœ‰o)", type: "o" },
        { py: "mÄ›i", char: "ç¾", rule: "æ²¡ a æ‰¾ o e (æœ‰e)", type: "e" },
        { py: "lÃ©i", char: "é›·", rule: "æ²¡ a æ‰¾ o e (æœ‰e)", type: "e" },
        { py: "liÃº", char: "æµ", rule: "i u å¹¶åˆ—æ ‡åœ¨å (æ ‡u)", type: "iu" },
        { py: "guÄ«", char: "å½’", rule: "i u å¹¶åˆ—æ ‡åœ¨å (æ ‡i)", type: "iu" },
        { py: "lÇ", char: "é‡Œ", rule: "i ä¸Šæ ‡è°ƒç‚¹å»æ‰", type: "i" },
        { py: "nÇ", char: "ä½ ", rule: "i ä¸Šæ ‡è°ƒç‚¹å»æ‰", type: "i" },
        { py: "lÇœ", char: "ç»¿", rule: "Ã¼ ä¸Šæ ‡è°ƒä¿ç•™ç‚¹", type: "u_dot" },
        { py: "nÇš", char: "å¥³", rule: "Ã¼ ä¸Šæ ‡è°ƒä¿ç•™ç‚¹", type: "u_dot" }
      ],
      three: [
        { py: "guÄ", char: "ç“œ", rule: "æœ‰ a å…ˆæ‰¾ a (ä¸ç®¡å¤šé•¿)", type: "a" },
        { py: "kuÃ ", char: "è·¨", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "xiÃ¡", char: "éœ", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "qiÃ ", char: "æ°", rule: "æœ‰ a å…ˆæ‰¾ a", type: "a" },
        { py: "guÇ’", char: "æœ", rule: "æ²¡ a æ‰¾ o e (æ ‡o)", type: "o" },
        { py: "juÃ©", char: "è§‰", rule: "æ²¡ a æ‰¾ o e (æ ‡e, jè§Ã¼å»ç‚¹)", type: "e" },
        { py: "xuÃ©", char: "å­¦", rule: "æ²¡ a æ‰¾ o e (æ ‡e, xè§Ã¼å»ç‚¹)", type: "e" },
        { py: "qiÅ«", char: "ç§‹", rule: "i u å¹¶åˆ—æ ‡åœ¨å (æ ‡u)", type: "iu" },
        { py: "guÄ«", char: "å½’", rule: "i u å¹¶åˆ—æ ‡åœ¨å (æ ‡i)", type: "iu" },
        { py: "jiÇo", char: "è„š", rule: "æœ‰ a å…ˆæ‰¾ a (ä¸æ˜¯iä¸Šæ ‡è°ƒ!)", type: "a" },
        { py: "diÇn", char: "ç‚¹", rule: "æœ‰ a å…ˆæ‰¾ a (ä¸æ˜¯iä¸Šæ ‡è°ƒ!)", type: "a" }
      ],
      whole: [
        { py: "yuÄn", char: "å†¤", rule: "æœ‰ a å…ˆæ‰¾ a (y-Ã¼-an)", type: "a" },
        { py: "yÄ“", char: "è€¶", rule: "æ²¡ a æ‰¾ o e (i-e)", type: "e" },
        { py: "yÃ©", char: "çˆ·", rule: "æ²¡ a æ‰¾ o e", type: "e" },
        { py: "yuÄ“", char: "çº¦", rule: "æ²¡ a æ‰¾ o e (Ã¼-e)", type: "e" },
        { py: "yÄ«", char: "è¡£", rule: "i ä¸Šæ ‡è°ƒç‚¹å»æ‰", type: "i" },
        { py: "wÅ«", char: "ä¹Œ", rule: "æ ‡åœ¨ u ä¸Š", type: "u" },
        { py: "yÅ«", char: "è¿‚", rule: "j q x y è§ Ã¼ å»ä¸¤ç‚¹ (æ ‡u)", type: "u" },
        { py: "yÇ”", char: "é›¨", rule: "j q x y è§ Ã¼ å»ä¸¤ç‚¹ (æ ‡u)", type: "u" },
        { py: "yÅ«n", char: "æ™•", rule: "j q x y è§ Ã¼ å»ä¸¤ç‚¹ (æ ‡u)", type: "u" }
      ]
    };

    // ä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ‹¼éŸ³æ‹†è§£æˆæ— å£°è°ƒç‰ˆæœ¬å’Œæ­£ç¡®ä½ç½®ç´¢å¼•
    function generateQuizData() {
      const all = [...data.two, ...data.three, ...data.whole];
      return all.map(item => {
        let cleanPy = item.py
          .replace(/[ÄÃ¡ÇÃ ]/g, 'a')
          .replace(/[ÅÃ³Ç’Ã²]/g, 'o')
          .replace(/[Ä“Ã©Ä›Ã¨]/g, 'e')
          .replace(/[Ä«Ã­ÇÃ¬]/g, 'i')
          .replace(/[Å«ÃºÇ”Ã¹]/g, 'u')
          .replace(/[Ç–Ç˜ÇšÇœ]/g, 'Ã¼');

        let targetChar = '';
        if (item.py.match(/[ÄÃ¡ÇÃ ]/)) targetChar = 'a';
        else if (item.py.match(/[ÅÃ³Ç’Ã²]/)) targetChar = 'o';
        else if (item.py.match(/[Ä“Ã©Ä›Ã¨]/)) targetChar = 'e';
        else if (item.py.match(/[Ä«Ã­ÇÃ¬]/)) targetChar = 'i';
        else if (item.py.match(/[Å«ÃºÇ”Ã¹]/)) targetChar = 'u';
        else if (item.py.match(/[Ç–Ç˜ÇšÇœ]/)) targetChar = 'Ã¼';

        // ç‰¹æ®Šå¤„ç† iu å¹¶åˆ—
        if (cleanPy.includes('iu')) targetChar = 'u';
        if (cleanPy.includes('ui')) targetChar = 'i';

        return {
          original: item.py,
          char: item.char,
          clean: cleanPy,
          targetChar: targetChar,
          hint: item.rule
        };
      }).sort(() => 0.5 - Math.random());
    }

    let quizQuestions = [];
    let currentQuestionIndex = 0;

    // --- TTS è¯­éŸ³ä¼˜åŒ–æ ¸å¿ƒé€»è¾‘ ---
    let availableVoices = [];

    function loadVoices() {
      // è·å–æ‰€æœ‰å¯ç”¨å£°éŸ³
      availableVoices = window.speechSynthesis.getVoices();
    }

    // è®¸å¤šæµè§ˆå™¨éœ€è¦ç­‰å¾… voiceschanged äº‹ä»¶æ‰èƒ½è·å–å£°éŸ³åˆ—è¡¨
    if ('speechSynthesis' in window) {
      loadVoices();
      window.speechSynthesis.onvoiceschanged = loadVoices;
    }

    function speak(text) {
      if ('speechSynthesis' in window) {
        // æ‰“æ–­ä¹‹å‰çš„å‘éŸ³ï¼Œé¿å…æ’é˜Ÿé€ æˆå»¶è¿Ÿ
        window.speechSynthesis.cancel();

        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'zh-CN'; // å¼ºåˆ¶ä¸­æ–‡
        utterance.rate = 0.8; // ä¿æŒè¾ƒæ…¢è¯­é€Ÿ

        // å¯»æ‰¾æœ€ä½³ä¸­æ–‡å£°éŸ³
        // ä¼˜å…ˆé¡ºåºï¼šzh-CN (å¤§é™†) > åŒ…å« 'Google' > åŒ…å« 'Microsoft' > å…¶ä»– zh
        if (availableVoices.length > 0) {
          // 1. ç­›é€‰æ‰€æœ‰ä¸­æ–‡å£°éŸ³ (zh-CN)
          const zhVoices = availableVoices.filter(v => v.lang === 'zh-CN' || v.lang === 'zh' || v.lang === 'zh-Hans');

          let targetVoice = null;

          if (zhVoices.length > 0) {
            // 2. å°è¯•å¯»æ‰¾ Google æ™®é€šè¯ (Chrome è´¨é‡è¾ƒå¥½)
            targetVoice = zhVoices.find(v => v.name.includes('Google'));

            // 3. å¦‚æœæ²¡æœ‰ï¼Œå°è¯• Microsoft Huihui (Windows è´¨é‡è¾ƒå¥½)
            if (!targetVoice) {
              targetVoice = zhVoices.find(v => v.name.includes('Microsoft') && v.name.includes('Chinese'));
            }

            // 4. å¦‚æœæ²¡æœ‰ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„ä¸­æ–‡å£°éŸ³ (é€šå¸¸æ˜¯ Apple çš„ Ting-Ting æˆ–å…¶ä»–é»˜è®¤)
            if (!targetVoice) {
              targetVoice = zhVoices[0];
            }
          }

          if (targetVoice) {
            utterance.voice = targetVoice;
            console.log("Using voice: " + targetVoice.name);
          }
        }

        window.speechSynthesis.speak(utterance);
      }
    }

    // æ ¸å¿ƒä¿®æ”¹ï¼šå°†å­—æ¯æ›¿æ¢ä¸ºåŒéŸ³æ±‰å­—ï¼Œç¡®ä¿å‘éŸ³ä¸ºä¸­æ–‡
    function playSong() {
      // åŸæ–‡ï¼šæœ‰ a å…ˆæ‰¾ aï¼Œæ²¡ a æ‰¾ o eï¼Œi u å¹¶åˆ—æ ‡åœ¨åï¼Œi ä¸Šæ ‡è°ƒç‚¹å»æ‰
      // æ¬ºéª—æµè§ˆå™¨ç‰ˆæœ¬ï¼š
      const songForTTS = "æœ‰ å•Š å…ˆæ‰¾ å•Šï¼Œæ²¡ å•Š æ‰¾ å–” é¹…ï¼Œè¡£ ä¹Œ å¹¶åˆ—æ ‡åœ¨åï¼Œè¡£ ä¸Šæ ‡è°ƒç‚¹å»æ‰";
      speak(songForTTS);
    }

    // --- æ¸²æŸ“é€»è¾‘ ---

    const colors = {
      'a': 'bg-red-100 text-red-600 border-red-200',
      'o': 'bg-yellow-100 text-yellow-600 border-yellow-200',
      'e': 'bg-green-100 text-green-600 border-green-200',
      'iu': 'bg-purple-100 text-purple-600 border-purple-200',
      'i': 'bg-indigo-100 text-indigo-600 border-indigo-200',
      'u': 'bg-blue-100 text-blue-600 border-blue-200',
      'u_dot': 'bg-pink-100 text-pink-600 border-pink-200'
    };

    function renderCards(category) {
      const container = document.getElementById('learning-view');
      container.innerHTML = '';

      data[category].forEach(item => {
        const style = colors[item.type] || 'bg-gray-100 text-gray-800';

        const card = document.createElement('div');
        card.className = `card bg-white rounded-xl shadow-md border-b-4 p-5 flex flex-col items-center justify-center relative overflow-hidden ${style.replace('bg-', 'border-')}`;

        // æ ¸å¿ƒä¿®æ”¹ï¼šç‚¹å‡»æ—¶ç›´æ¥è¯»æ±‰å­— (item.char)ï¼Œå› ä¸ºæ±‰å­—å‘éŸ³å’Œæ‹¼éŸ³(item.py)æ˜¯ä¸€æ ·çš„
        // è¿™æ ·æµè§ˆå™¨å°±ä¸€å®šä¼šç”¨ä¸­æ–‡è¯»ï¼Œè€Œä¸ä¼šå»å°è¯•è¯»è‹±è¯­å­—æ¯
        card.onclick = () => speak(item.char);

        card.innerHTML = `
                    <div class="absolute top-2 right-2 text-2xl opacity-20">ğŸ”Š</div>
                    <div class="text-5xl font-bold pinyin-font mb-2 ${style.split(' ')[1]}">${item.py}</div>
                    <div class="text-3xl text-gray-700 font-serif mb-3">${item.char}</div>
                    <div class="w-full bg-gray-50 rounded-lg p-2 text-center">
                        <span class="text-xs text-gray-400 uppercase tracking-wider">è§„åˆ™</span>
                        <p class="text-sm font-bold text-gray-600 leading-tight mt-1">${item.rule}</p>
                    </div>
                `;
        container.appendChild(card);
      });
    }

    // --- Tab åˆ‡æ¢ ---
    function switchTab(tab) {
      // Update buttons
      ['two', 'three', 'whole', 'quiz'].forEach(t => {
        const btn = document.getElementById(`tab-${t}`);
        if (t === tab) {
          btn.classList.remove('btn-inactive');
          btn.classList.add('btn-active');
          if (t === 'quiz') {
            btn.classList.remove('bg-purple-100', 'text-purple-700', 'border-purple-200');
            btn.classList.add('bg-purple-600', 'text-white', 'border-purple-600');
          }
        } else {
          btn.classList.remove('btn-active');
          btn.classList.add('btn-inactive');
          if (t === 'quiz') {
            btn.classList.add('bg-purple-100', 'text-purple-700', 'border-purple-200');
            btn.classList.remove('bg-purple-600', 'text-white', 'border-purple-600');
          }
        }
      });

      // Update Views
      const learningView = document.getElementById('learning-view');
      const quizView = document.getElementById('quiz-view');

      if (tab === 'quiz') {
        learningView.classList.add('hidden');
        quizView.classList.remove('hidden');
        initQuiz();
      } else {
        learningView.classList.remove('hidden');
        quizView.classList.add('hidden');
        renderCards(tab);
      }
    }

    // --- æ¸¸æˆé€»è¾‘ ---
    function initQuiz() {
      quizQuestions = generateQuizData();
      currentQuestionIndex = 0;
      renderQuestion();
    }

    function renderQuestion() {
      const q = quizQuestions[currentQuestionIndex];
      const container = document.getElementById('quiz-letters');
      const feedback = document.getElementById('quiz-feedback');
      const nextBtn = document.getElementById('next-btn');

      document.getElementById('quiz-count').innerText = currentQuestionIndex + 1;

      // Reset UI
      container.innerHTML = '';
      feedback.innerHTML = `<div class="text-xl font-bold text-blue-600">æ±‰å­—ï¼š${q.char}</div>`;
      nextBtn.classList.add('hidden');

      let displayChars = q.clean.split('');

      displayChars.forEach((char, index) => {
        const btn = document.createElement('button');
        btn.className = "w-12 h-16 md:w-16 md:h-20 text-3xl md:text-4xl font-bold rounded-lg border-2 border-gray-200 bg-white text-gray-700 hover:bg-blue-50 focus:outline-none transition transform shadow-sm";
        btn.innerText = char;

        btn.onclick = () => {
          const isCorrect = (char === q.targetChar) ||
            (q.targetChar === 'Ã¼' && char === 'u' && q.clean.includes('u') && !q.clean.includes('a') && !q.clean.includes('e'));

          let actuallyCorrect = false;

          // åˆ¤æ–­é€»è¾‘
          if (char === q.targetChar) actuallyCorrect = true;
          if (q.targetChar === 'Ã¼' && char === 'u') actuallyCorrect = true;
          if (q.original.includes('ui') && char === 'i') actuallyCorrect = true;
          if (q.original.includes('iu') && char === 'u') actuallyCorrect = true;

          if (actuallyCorrect) {
            btn.classList.remove('bg-white', 'border-gray-200');
            btn.classList.add('bg-green-500', 'text-white', 'border-green-600', 'correct-anim');
            feedback.innerHTML = `
                            <div class="text-center">
                                <p class="text-green-600 font-bold text-xl">ğŸ‰ ç­”å¯¹å•¦ï¼è¯»ä½œï¼š${q.original}</p>
                                <p class="text-gray-500 text-sm mt-1">${q.hint}</p>
                            </div>
                        `;
            // æ ¸å¿ƒä¿®æ”¹ï¼šç­”å¯¹æ—¶è¯»æ±‰å­—ï¼Œç¡®ä¿å‘éŸ³æ­£ç¡®
            speak("ç­”å¯¹äº†ï¼" + q.char);

            Array.from(container.children).forEach(b => b.disabled = true);
            nextBtn.classList.remove('hidden');
          } else {
            btn.classList.add('bg-red-100', 'border-red-300', 'text-red-500', 'shake');
            setTimeout(() => btn.classList.remove('shake'), 500);
            speak("ä¸å¯¹å“¦");

            if ('aeiouÃ¼'.includes(char)) {
              feedback.innerHTML = `<p class="text-red-500 font-bold">ä¸æ˜¯æ ‡åœ¨ ${char} ä¸Šå“¦ï¼Œå†æƒ³æƒ³å£è¯€ï¼</p>`;
            } else {
              feedback.innerHTML = `<p class="text-red-500 font-bold">å£°è°ƒä»æ¥ä¸æ ‡åœ¨å£°æ¯ ${char} ä¸Šå“¦ï¼</p>`;
            }
          }
        };
        container.appendChild(btn);
      });
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex >= quizQuestions.length) {
        document.getElementById('quiz-letters').innerHTML = `<div class="text-4xl">ğŸ†</div>`;
        document.getElementById('quiz-feedback').innerHTML = `<p class="text-xl font-bold text-purple-600">æŒ‘æˆ˜å®Œæˆï¼HilsonçœŸæ£’ï¼</p>`;
        document.getElementById('next-btn').innerHTML = "é‡æ–°å¼€å§‹";
        document.getElementById('next-btn').onclick = initQuiz;
      } else {
        renderQuestion();
      }
    }

    const style = document.createElement('style');
    style.innerHTML = `
            .shake { animation: shake 0.5s; }
            @keyframes shake {
                0% { transform: translate(1px, 1px) rotate(0deg); }
                10% { transform: translate(-1px, -2px) rotate(-1deg); }
                20% { transform: translate(-3px, 0px) rotate(1deg); }
                30% { transform: translate(3px, 2px) rotate(0deg); }
                40% { transform: translate(1px, -1px) rotate(1deg); }
                50% { transform: translate(-1px, 2px) rotate(-1deg); }
                60% { transform: translate(-3px, 1px) rotate(0deg); }
                70% { transform: translate(3px, 1px) rotate(-1deg); }
                80% { transform: translate(-1px, -1px) rotate(1deg); }
                90% { transform: translate(1px, 2px) rotate(0deg); }
                100% { transform: translate(1px, -2px) rotate(-1deg); }
            }
        `;
    document.head.appendChild(style);

    switchTab('two');

  </script>
</body>

</html>
